"""Products Agent Tool ‚Äî —ç–∫—Å–ø–µ—Ä—Ç –ø–æ –ë–ê–î–∞–º –∏ –±–∏–æ—Ö–∞–∫–∏–Ω–≥—É."""

from __future__ import annotations

from langchain_core.tools import tool

from src.core.logging import get_logger

logger = get_logger(__name__)


@tool
async def products_agent(query: str) -> str:
    """
    –ê–≥–µ–Ω—Ç –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º: –ë–ê–î—ã, –º–∏–∫—Ä–æ–¥–æ–∑–∏–Ω–≥ –≥—Ä–∏–±–æ–≤, –±–∏–æ—Ö–∞–∫–∏–Ω–≥, —Ä–µ—Ü–µ–ø—Ç—ã –∏ –ø—Ä–∏–≤—ã—á–∫–∏.

    –í—ã–∑—ã–≤–∞–π —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø—Ä–æ:
    - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ë–ê–î—ã –∏ –¥–æ–±–∞–≤–∫–∏
    - –î–æ–∑–∏—Ä–æ–≤–∫–∏ –∏ —Å—Ö–µ–º—ã –ø—Ä–∏—ë–º–∞
    - –ú–∏–∫—Ä–æ–¥–æ–∑–∏–Ω–≥ –≥—Ä–∏–±–æ–≤
    - –ö—É—Ä—Å –±–∏–æ—Ö–∞–∫–∏–Ω–≥–∞
    - –†–µ—Ü–µ–ø—Ç—ã –∏ –∑–¥–æ—Ä–æ–≤—ã–µ –ø—Ä–∏–≤—ã—á–∫–∏
    - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–¥—É–∫—Ç–∞–º –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ü–µ–ª–µ–π

    Args:
        query: –í–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —É—Ç–æ—á–Ω–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å

    Returns:
        –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –æ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞
    """
    logger.info(
        "Products agent called",
        extra={"query_preview": query[:100] if query else "empty"},
    )

    # TODO: Phase 6 - –∑–¥–µ—Å—å –±—É–¥–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π MCP-–∞–≥–µ–Ω—Ç —Å RAG
    # –ü–æ–∫–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∑–∞–≥–ª—É—à–∫—É —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
    stub_response = """**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–Ω–∞:**

üåô **–ú–µ–ª–∞—Ç–æ–Ω–∏–Ω (3-5 –º–≥)**
- –†–µ–≥—É–ª–∏—Ä—É–µ—Ç —Ü–∏—Ä–∫–∞–¥–Ω—ã–µ —Ä–∏—Ç–º—ã
- –ü—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞ 30-60 –º–∏–Ω—É—Ç –¥–æ —Å–Ω–∞
- –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–≤—ã–∫–∞–Ω–∏—è

üçµ **L-—Ç–µ–∞–Ω–∏–Ω (200-400 –º–≥)**
- –°–ø–æ—Å–æ–±—Å—Ç–≤—É–µ—Ç —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–∏—é –±–µ–∑ —Å–æ–Ω–ª–∏–≤–æ—Å—Ç–∏
- –•–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å –º–∞–≥–Ω–∏–µ–º
- –ú–æ–∂–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤–µ—á–µ—Ä–æ–º

‚ú® **–ú–∞–≥–Ω–∏–π –≥–ª–∏—Ü–∏–Ω–∞—Ç (400 –º–≥)**
- –£—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É
- –£–ª—É—á—à–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞
- –õ—É—á—à–∞—è —Ñ–æ—Ä–º–∞ –¥–ª—è —É—Å–≤–æ–µ–Ω–∏—è

‚ö†Ô∏è –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –¥–æ–∑–∏—Ä–æ–≤–æ–∫ –∏ –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–π—Ç–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏."""

    logger.info("Products agent completed")
    return stub_response
